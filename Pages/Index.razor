@page "/"
@inject EventEase.Services.EventService Events

<h1>EventEase</h1>
<p>Browse and register for upcoming events.</p>

<Virtualize ItemsProvider="LoadEvents" ItemSize="120">
    <ItemContent Context="e">
        <EventCard Event="e" />
    </ItemContent>
</Virtualize>

@code {
    private async ValueTask<ItemsProviderResult<EventEase.Models.Event>> LoadEvents(ItemsProviderRequest req)
    {
        var all = await Events.GetAllAsync();
        var slice = all.Skip(req.StartIndex).Take(req.Count).ToList();
        return new ItemsProviderResult<EventEase.Models.Event>(slice, all.Count);
    }
}
